!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerSystem("voice-command",{init:function(){console.log("in voice-command system init"),this.entities=[],window.addEventListener("loaded",this.onSceneLoaded.bind(this))},registerMe:function(t){this.entities.push(t),console.log("in register, comp: "+t.data.command)},unregisterMe:function(t){var e=this.entities.indexOf(t);this.entities.splice(e,1)},onSceneLoaded:function(t){console.log("in voice-command system onSceneLoaded listener")},play:function(){console.log("in system play, entities: "+this.entities)}}),AFRAME.registerComponent("voice-command",{multiple:!0,schema:{command:{type:"string"},type:{type:"string"},targetElement:{type:"selector"},targetComponent:{type:"string"},function:{type:"string"},attribute:{type:"string"},value:{type:"string"},keyCode:{type:"string"}},init:function(){this.system.registerMe(this),this.data.targetElement||(this.data.targetElement=this.el),this.data.keyCode&&window.addEventListener("keyup",this.onKeyup.bind(this))},remove:function(){this.system.unregisterMe(this)},play:function(){console.log("in voice-command play, command: "+this.data.command+", type: "+this.data.type)},executeCommand:function(){console.log("in executeCommand for: "+this.data.targetElement);var t=this.data.targetElement;if("attribute"==this.data.type)console.log("about to change attribute "+this.data.attribute+" to: "+this.data.value),t.setAttribute(this.data.attribute,this.data.value);else if("function"==this.data.type){var e=t.components[this.data.targetComponent];e[this.data.function]()}},onKeyup:function(t){t.keyCode==this.data.keyCode&&(console.log("in voice command keyup for: "+this.data.command),this.executeCommand())}}),AFRAME.registerComponent("annyang-voice-recognition",{init:function(){console.log("in annyang-voice-recognition init")},play:function(){if(annyang){console.log("annyang: "+annyang),console.log("annyang.addCommands: "+annyang.addCommands);for(var t=document.querySelector("a-scene").systems["voice-command"],e={},n={},o=0;o<t.entities.length;o++){var i=t.entities[o];n[i.data.command]=i,e[i.data.command]=function(){}}annyang.addCommands(e),annyang.addCallback("resultMatch",function(t,e,o){console.log("commandText: "+e);var i=n[e];i.executeCommand()}),annyang.start()}}})}]);